var ScrollAssist={sections:[],percentage:.1,timeout:100,timer:null,lastPosition:0,transition:500,elements:jQuery("section.scrollAssist"),firstLoad:!0,load:function(){var scrObj=this;scrObj.sections=[],scrObj.elements.each(function(e){var pos=jQuery(this).position(),t=pos.top,l=pos.left,w=jQuery(this).outerWidth(),h=jQuery(this).outerHeight(),r=parseInt(l)+parseInt(w),b=parseInt(t)+parseInt(h),tZ=parseInt(t)-parseInt(h)*parseFloat(scrObj.percentage),bZ=parseInt(b)+parseInt(h)*parseFloat(scrObj.percentage);scrObj.sections.push({el:this,top:t,right:r,bottom:b,left:l,topZone:tZ,bottomZone:bZ})}),scrObj.firstLoad===!0&&(jQuery(document).on("scroll",function(e){scrObj.detect(e)}),jQuery(window).on("resize",function(e){scrObj.load()}),scrObj.firstLoad=!1)},goTo:function(event,section){event.preventDefault(),event.stopPropagation(),jQuery("html, body").animate({scrollTop:section.top},this.transition)},detect:function(event){if(this.sections.length<=0)return!1;clearTimeout(this.timer);var scrEvent=event,scrObj=this;this.timer=setTimeout(function(){var top=jQuery(document).scrollTop(),bot=parseInt(top)+parseInt(jQuery(window).height());if(top<scrObj.lastPosition)for(var x=scrObj.sections.length-1;x>=0;x--){var sec=scrObj.sections[x];if(x>0&&top<sec.topZone&&bot>scrObj.sections[x-1].bottom){scrObj.goTo(scrEvent,scrObj.sections[x-1]);break}}else if(top>scrObj.lastPosition)for(var x=0;x<scrObj.sections.length;x++){var sec=scrObj.sections[x];if(x<parseInt(scrObj.sections.length)-1&&bot>sec.bottomZone&&top<scrObj.sections[x+1].top){scrObj.goTo(scrEvent,scrObj.sections[x+1]);break}}scrObj.lastPosition=top},this.timeout)}};jQuery.fn.ScrollAssist=function(settings){if(void 0==jQuery)return alert("jQuery can not be accessed."),!1;var newObject=ScrollAssist;return void 0!=settings&&(void 0==settings.percentage||isNaN(settings.percentage)||(newObject.percentage=settings.percentage),void 0==settings.timeout||isNaN(settings.timeout)||(newObject.timeout=settings.timeout),void 0==settings.timeout||isNaN(settings.timeout)||(newObject.transition=settings.transition)),newObject.elements=this,newObject.load(),newObject};
